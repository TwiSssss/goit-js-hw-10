{"version":3,"file":"1-timer.js","sources":["../src/img/error-icon.svg","../src/js/1-timer.js"],"sourcesContent":["export default \"data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3c!--%20Uploaded%20to:%20SVG%20Repo,%20www.svgrepo.com,%20Generator:%20SVG%20Repo%20Mixer%20Tools%20--%3e%3csvg%20width='800px'%20height='800px'%20viewBox='0%200%2016%2016'%20xmlns='http://www.w3.org/2000/svg'%20fill='%23000000'%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M8.6%201c1.6.1%203.1.9%204.2%202%201.3%201.4%202%203.1%202%205.1%200%201.6-.6%203.1-1.6%204.4-1%201.2-2.4%202.1-4%202.4-1.6.3-3.2.1-4.6-.7-1.4-.8-2.5-2-3.1-3.5C.9%209.2.8%207.5%201.3%206c.5-1.6%201.4-2.9%202.8-3.8C5.4%201.3%207%20.9%208.6%201zm.5%2012.9c1.3-.3%202.5-1%203.4-2.1.8-1.1%201.3-2.4%201.2-3.8%200-1.6-.6-3.2-1.7-4.3-1-1-2.2-1.6-3.6-1.7-1.3-.1-2.7.2-3.8%201-1.1.8-1.9%201.9-2.3%203.3-.4%201.3-.4%202.7.2%204%20.6%201.3%201.5%202.3%202.7%203%201.2.7%202.6.9%203.9.6zM7.9%207.5L10.3%205l.7.7-2.4%202.5%202.4%202.5-.7.7-2.4-2.5-2.4%202.5-.7-.7%202.4-2.5-2.4-2.5.7-.7%202.4%202.5z'/%3e%3c/svg%3e\"","import flatpickr from \"flatpickr\";\nimport iziToast from \"izitoast\";\nimport \"flatpickr/dist/flatpickr.min.css\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport pathErrorIcon from \"../img/error-icon.svg\";\n\nconst refs = {\n    startBtn: document.querySelector(\"button[data-start]\"),\n    dateTimePicker: document.querySelector(\"#datetime-picker\"),\n    clockface: document.querySelector(\".timer\"),\n    clockField: document.querySelector(\".field\"),\n    daysField: document.querySelector(\"[data-days]\"),\n    hoursField: document.querySelector(\"[data-hours]\"),\n    minutesField: document.querySelector(\"[data-minutes]\"),\n    secondsField: document.querySelector(\"[data-seconds]\"),\n};\n\nconst selector = \"#datetime-picker\";\nconst options = {\n    enableTime: true,\n    time_24hr: true,\n    defaultDate: new Date(),\n    minuteIncrement: 1,\n    onClose(selectedDates) {\n        console.log(selectedDates[0]);\n    },\n};\nflatpickr(selector, options);\n\nconst timer = {\n    intervalId: null,\n    targetTime: null,\n\n    start() {\n        console.log(\"START\");\n        const userDate = refs.dateTimePicker.value;\n        this.targetTime = new Date(userDate).getTime();\n        this.intervalId = setInterval(() => {\n            this.tick();\n        }, 1000);\n    },\n\n    tick() {\n        const currentTime = Date.now();\n        const ms = this.targetTime - currentTime;\n        if (ms < 0) {\n            this.stop();\n            refs.dateTimePicker.disabled = false;\n            return;\n        }\n        const time = convertMs(ms);\n        refs.daysField.textContent = addLeadingZero(time.days);\n        refs.hoursField.textContent = addLeadingZero(time.hours);\n        refs.minutesField.textContent = addLeadingZero(time.minutes);\n        refs.secondsField.textContent = addLeadingZero(time.seconds);\n    },\n\n    stop() {\n        clearInterval(this.intervalId);\n    },\n};\nfunction addLeadingZero(value) {\n    return value.toString().padStart(2, \"0\");\n}\n\nrefs.dateTimePicker.addEventListener(\"input\", (event) => {\n    const selectedDate = new Date(event.target.value);\n\n    if (selectedDate < Date.now()) {\n        refs.startBtn.disabled = true;\n        iziToast.show({\n            message: \"Please choose a date in the future!\",\n            position: \"topRight\",\n            backgroundColor: \"#FF4D4D\",\n            iconUrl: pathErrorIcon,\n            timeout: 5000,\n            transitionIn: \"fadeInDown\",\n        });\n        return;\n    } else {\n        refs.startBtn.disabled = false;\n    }\n});\n\nrefs.startBtn.addEventListener(\"click\", () => {\n    refs.startBtn.disabled = true;\n    refs.dateTimePicker.disabled = true;\n    timer.start();\n});\nrefs.startBtn.disabled = true;\n\nfunction convertMs(ms) {\n    // Number of milliseconds per unit of time\n    const second = 1000;\n    const minute = second * 60;\n    const hour = minute * 60;\n    const day = hour * 24;\n\n    // Remaining days\n    const days = Math.floor(ms / day);\n    // Remaining hours\n    const hours = Math.floor((ms % day) / hour);\n    // Remaining minutes\n    const minutes = Math.floor(((ms % day) % hour) / minute);\n    // Remaining seconds\n    const seconds = Math.floor((((ms % day) % hour) % minute) / second);\n\n    return { days, hours, minutes, seconds };\n}\n\nconsole.log(convertMs(2000)); // {days: 0, hours: 0, minutes: 0, seconds: 2}\nconsole.log(convertMs(140000)); // {days: 0, hours: 0, minutes: 2, seconds: 20}\nconsole.log(convertMs(24140000)); // {days: 0, hours: 6 minutes: 42, seconds: 20}\n"],"names":["pathErrorIcon","refs","selector","options","selectedDates","flatpickr","timer","userDate","currentTime","ms","time","convertMs","addLeadingZero","value","event","iziToast","days","hours","minutes","seconds"],"mappings":"2GAAA,MAAeA,EAAA,+7BCMTC,EAAO,CACT,SAAU,SAAS,cAAc,oBAAoB,EACrD,eAAgB,SAAS,cAAc,kBAAkB,EACzD,UAAW,SAAS,cAAc,QAAQ,EAC1C,WAAY,SAAS,cAAc,QAAQ,EAC3C,UAAW,SAAS,cAAc,aAAa,EAC/C,WAAY,SAAS,cAAc,cAAc,EACjD,aAAc,SAAS,cAAc,gBAAgB,EACrD,aAAc,SAAS,cAAc,gBAAgB,CACzD,EAEMC,EAAW,mBACXC,EAAU,CACZ,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,QAAQC,EAAe,CACnB,QAAQ,IAAIA,EAAc,CAAC,CAAC,CAC/B,CACL,EACAC,EAAUH,EAAUC,CAAO,EAE3B,MAAMG,EAAQ,CACV,WAAY,KACZ,WAAY,KAEZ,OAAQ,CACJ,QAAQ,IAAI,OAAO,EACnB,MAAMC,EAAWN,EAAK,eAAe,MACrC,KAAK,WAAa,IAAI,KAAKM,CAAQ,EAAE,QAAO,EAC5C,KAAK,WAAa,YAAY,IAAM,CAChC,KAAK,KAAI,CACZ,EAAE,GAAI,CACV,EAED,MAAO,CACH,MAAMC,EAAc,KAAK,MACnBC,EAAK,KAAK,WAAaD,EAC7B,GAAIC,EAAK,EAAG,CACR,KAAK,KAAI,EACTR,EAAK,eAAe,SAAW,GAC/B,MACH,CACD,MAAMS,EAAOC,EAAUF,CAAE,EACzBR,EAAK,UAAU,YAAcW,EAAeF,EAAK,IAAI,EACrDT,EAAK,WAAW,YAAcW,EAAeF,EAAK,KAAK,EACvDT,EAAK,aAAa,YAAcW,EAAeF,EAAK,OAAO,EAC3DT,EAAK,aAAa,YAAcW,EAAeF,EAAK,OAAO,CAC9D,EAED,MAAO,CACH,cAAc,KAAK,UAAU,CAChC,CACL,EACA,SAASE,EAAeC,EAAO,CAC3B,OAAOA,EAAM,SAAU,EAAC,SAAS,EAAG,GAAG,CAC3C,CAEAZ,EAAK,eAAe,iBAAiB,QAAUa,GAAU,CAGrD,GAFqB,IAAI,KAAKA,EAAM,OAAO,KAAK,EAE7B,KAAK,MAAO,CAC3Bb,EAAK,SAAS,SAAW,GACzBc,EAAS,KAAK,CACV,QAAS,sCACT,SAAU,WACV,gBAAiB,UACjB,QAASf,EACT,QAAS,IACT,aAAc,YAC1B,CAAS,EACD,MACR,MACQC,EAAK,SAAS,SAAW,EAEjC,CAAC,EAEDA,EAAK,SAAS,iBAAiB,QAAS,IAAM,CAC1CA,EAAK,SAAS,SAAW,GACzBA,EAAK,eAAe,SAAW,GAC/BK,EAAM,MAAK,CACf,CAAC,EACDL,EAAK,SAAS,SAAW,GAEzB,SAASU,EAAUF,EAAI,CAQnB,MAAMO,EAAO,KAAK,MAAMP,EAAK,KAAG,EAE1BQ,EAAQ,KAAK,MAAOR,EAAK,MAAO,IAAI,EAEpCS,EAAU,KAAK,MAAQT,EAAK,MAAO,KAAQ,GAAM,EAEjDU,EAAU,KAAK,MAASV,EAAK,MAAO,KAAQ,IAAU,GAAM,EAElE,MAAO,CAAE,KAAAO,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,CAC1C,CAEA,QAAQ,IAAIR,EAAU,GAAI,CAAC,EAC3B,QAAQ,IAAIA,EAAU,IAAM,CAAC,EAC7B,QAAQ,IAAIA,EAAU,MAAQ,CAAC"}